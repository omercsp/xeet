variables:
  scripts_dir: '{XEET_ROOT}/../../scripts/testing'
  echo: 'python {scripts_dir}/echo.py'
  false_cmd: 'python {scripts_dir}/rc.py 1'
settings:
  common_steps:
    - &base_step
      type: dummy
      return_value: "something"
    - &incomplete_step
      type: dummy
      completed: false
    - &failing_step
      type: dummy
      fail: true
tests:
  - name: 001_pass
    run:
      - <<: *base_step
    groups: [passing]
  - name: 002_fail
    run:
      - <<: *failing_step
    groups: [failing]
  - name: 002_incomplete
    run:
      - <<: *incomplete_step
    groups: [not_run]

  - name: 003_two_steps
    run:
      - <<: *base_step
      - <<: *base_step
    groups: [passing]

  - name: 004_two_steps_fail
    run:
      - <<: *base_step
      - <<: *failing_step
    groups: [passing]

  - name: 005_two_steps_incomplete
    run:
      - <<: *base_step
      - <<: *incomplete_step
    groups: [not_run]

  - name: 006_pre_run_pass
    pre_run:
      - <<: *base_step
    run:
      - <<: *base_step
    groups: [passing]

  - name: 007_pre_run_fail
    pre_run:
      - <<: *failing_step
    run:
      - <<: *base_step
    groups: [not_run]

  - name: 008_post_run_pass
    run:
      - <<: *base_step
    post_run:
      - <<: *base_step
    groups: [passing]

  - name: 009_post_run_fail
    run:
      - <<: *base_step
    post_run:
      - <<: *failing_step
    groups: [passing]

  - name: 010_pre_run_fail_post_run_fail
    pre_run:
      - <<: *failing_step
    run:
      - <<: *base_step
    post_run:
      - <<: *failing_step
    groups: [not_run]

  - name: 011_expected_failure
    run:
      - <<: *failing_step
    expected_failure: true
    groups: [passing]

  - name: 012_expected_failure_fail
    run:
      - <<: *base_step
    expected_failure: true
    groups: [failing]

  - name: abstract_base
    abstract: true
    run:
      - <<: *base_step

  - name: 100_inherit_abstract
    base: abstract_base
    groups: [passing, inheritance]

  - name: 101_inherit_abstract_add_step
    base: abstract_base
    test_steps_inheritance: append
    run:
      - <<: *base_step
    groups: [passing, inheritance]

  - name: 102_inherit_abstract_add_step_fail
    base: abstract_base
    test_steps_inheritance: append
    run:
      - <<: *failing_step
    groups: [passing, inheritance]

  - name: 103_inherit_add_step_pre_run_fail
    base: 102_inherit_abstract_add_step_fail
    pre_run:
      - <<: *base_step
    groups: [failing, inheritance] # failing because of base run failure

  - name: 104_inherit_add_step_post_run_replace_run
    base: 102_inherit_abstract_add_step_fail
    run: # override failure with success
      - <<: *base_step
    groups: [passing, inheritance]

  - name: 104_inherit_prepend_pre_run_incomplete
    base: 102_inherit_abstract_add_step_fail
    pre_test_inheritance: prepend
    pre_run:
      - <<: *incomplete_step
    groups: [not_run, inheritance]

  - name: 105_self_inherit_loop
    base: 105_self_inherit_loop
    run:
      - <<: *failing_step
    groups: [not_run, inheritance]

  - name: 106_inherit_loop_1
    base: 107_inherit_loop_2
    groups: [not_run, inheritance]

  - name: 107_inherit_loop_2
    base: 106_inherit_loop_1
    groups: [not_run, inheritance]
